<div class="sidebar-tree-item" [class.sidebar-tree-item--active]="isActive()">
  <button
    class="sidebar-tree-item__line-icon"
    cuButtonIcon
    cuButtonSize="xsmall"
    [style.--cu-background-color-line-icon]="item()?.color">
    {{ item()?.name | firstChar }}
  </button>

  <a
    class="sidebar-tree-item__link"
    [routerLink]="routerLink()">
    {{ item()?.name }}
  </a>

  <cu-dropdown-menu>
    <button
      contextTrigger
      cuButton
      cuButtonSize="compact"
      class="sidebar-tree-item__menu">
      <fa-icon [icon]="faRectangleList"></fa-icon>
    </button>

    <div class="sidebar-tree-item__context-menu" contextMenu>
      @if (item()?.type === hierarchyType.SPACE) {
        <button
          cuButtonIcon
          cuButtonSize="xsmall"
          (click)="onAddList(item())">
          <fa-icon [icon]="faHandLizard"></fa-icon>
          <span>Add List</span>
        </button>
      }

      <button
        cuButtonIcon
        cuButtonSize="xsmall"
        (click)="onRenameItem(item())">
        <fa-icon [icon]="faPenToSquare"></fa-icon>
        <span>Rename</span>
      </button>

      <button
        class="sidebar-tree-item__context-menu--delete-button"
        cuButtonIcon
        cuButtonSize="xsmall"
        (click)="onDeleteItem(item())">
        <fa-icon
          [icon]="faTrashCan">
        </fa-icon>
        <span>Delete</span>
      </button>
    </div>
  </cu-dropdown-menu>
</div>

<div class="sidebar-tree-item__children">
  <ng-content></ng-content>
</div>
